if (self.CavalryLogger) { CavalryLogger.start_js(["u8ZR3MN"]); }

__d("CometPhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[{alias:null,args:null,kind:"ScalarField",name:"passes_gk",storageKey:null}],c=[a];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"glbFileURIHackToRenderAs3D_DO_NOT_USE"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"CometPhotoViewer_photo",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"can_viewer_add_tags",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:"user_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"additional_profile_has_taggable_products",args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"page_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_admin",storageKey:null},{alias:"page_shop_has_taggable_products",args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null},{kind:"InlineDataFragmentSpread",name:"FBShopsLegacyUpgradeProductTaggingUtils_page",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"legacy_shop_upgrade_admin_and_page_eligibility",storageKey:null},{alias:"friction_gk",args:[{kind:"Literal",name:"gk_name",value:"fb_shops_legacy_shop_product_tagging_friction"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:b,storageKey:'gk_check(gk_name:"fb_shops_legacy_shop_product_tagging_friction")'},{alias:"blocking_gk",args:[{kind:"Literal",name:"gk_name",value:"fb_shops_legacy_shop_product_tagging_block"}],concreteType:"EntGKCheck",kind:"LinkedField",name:"gk_check",plural:!1,selections:b,storageKey:'gk_check(gk_name:"fb_shops_legacy_shop_product_tagging_block")'}]}],type:"Page",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null},{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:c,storageKey:null},{alias:null,args:[{kind:"Variable",name:"glb_file_uri_hack_to_render_as_3D_DO_NOT_USE",variableName:"glbFileURIHackToRenderAs3D_DO_NOT_USE"},{kind:"Literal",name:"supported",value:["XFBCometImmersive360PhotoRenderer","XFBCometImmersive3DPhotoRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_photo_renderer",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometPhotoViewer_photo_photo_renderer",fragmentName:"CometRemote360PhotoViewerRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCometImmersive360PhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPhotoViewer_photo_photo_renderer",fragmentName:"CometRemote3DPhotoViewerRenderer_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCometImmersive3DPhotoRenderer",abstractKey:null}],storageKey:null},{kind:"InlineDataFragmentSpread",name:"CometAIProductTagSuggestionsUtil_photo",selections:[a,{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:[a,{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"xy_location",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],storageKey:null}]},{alias:null,args:null,concreteType:"PhotoTagsConnection",kind:"LinkedField",name:"tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PhotoTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PhotoTag",kind:"LinkedField",name:"tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_product_tag",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"container_story",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_tracking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"photo_viewer"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometPhotoViewer_photo",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"photo_viewer")'}],type:"Photo",abstractKey:null}}();e.exports=a}),null);
__d("CometSinglePostRootQuery.graphql",["CometFeedUnit_feedUnit$normalization.graphql","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"UFI2CommentsProvider_commentsKey"},c={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextEnableComment"},d={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAdPreview"},e={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsAggregatedShare"},f={defaultValue:null,kind:"LocalArgument",name:"displayCommentsContextIsStorySet"},g={defaultValue:null,kind:"LocalArgument",name:"displayCommentsFeedbackContext"},h={defaultValue:null,kind:"LocalArgument",name:"feedLocation"},i={defaultValue:null,kind:"LocalArgument",name:"feedbackSource"},j={defaultValue:null,kind:"LocalArgument",name:"focusCommentID"},k={defaultValue:null,kind:"LocalArgument",name:"privacySelectorRenderLocation"},l={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},m={defaultValue:null,kind:"LocalArgument",name:"scale"},n={defaultValue:null,kind:"LocalArgument",name:"storyID"},o={defaultValue:!1,kind:"LocalArgument",name:"useDefaultActor"},p=[{kind:"Variable",name:"id",variableName:"storyID"}];return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h,i,j,k,l,m,n,o],kind:"Fragment",metadata:null,name:"CometSinglePostRootQuery",selections:[{alias:null,args:p,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometFeedUnit_feedUnit"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[g,c,d,e,f,h,i,j,k,m,o,n,l,a],kind:"Operation",name:"CometSinglePostRootQuery",selections:[{alias:null,args:p,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,fragment:b("CometFeedUnit_feedUnit$normalization.graphql"),kind:"FragmentSpread"}],type:"FeedUnit",abstractKey:"__isFeedUnit"},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"3686480951452874",metadata:{},name:"CometSinglePostRootQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("HoveredProductIDContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({hoveredProductID:null,setHoveredProductID:c("emptyFunction")});g["default"]=b}),98);
__d("CometPhotoTaggingConstants",[],(function(a,b,c,d,e,f){"use strict";a=3;b=1;c=94;f.BOX_BORDER_SIZE=a;f.INITIAL_PHOTO_RENDER_SCALE=b;f.TAGGING_BOX_SIZE=c}),66);
__d("CometPhotoViewerZoomUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return c[0]===0||c[1]===0?!1:c[1]<a.clientHeight*b||c[0]<a.clientWidth*b}f.isOverflown=a}),66);
__d("CometPhotoViewerImgRenderer.react",["CometHeroHoldTrigger.react","CometImage.react","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useLayoutEffect,j=b.useState,k={img:{objectFit:"r0294ipz"}};function l(a){var b=a.alt,d=a.currentImgSrc,e=a.height,f=a.origSrc,g=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["alt","currentImgSrc","height","origSrc","xstyle"]);var l=c("useStable")(function(){var a=new Image();a.src=d;return a}),m=j(l.complete),n=m[0],o=m[1];m=j(!1);var p=m[0],q=m[1];i(function(){if(l.complete)o(!0);else{l.onload=function(){o(!0)};l.onerror=function(){q(!0)};return function(){l.onload=null,l.onerror=null}}},[l,o,q]);return h.jsxs(h.Fragment,{children:[h.jsx(c("CometHeroHoldTrigger.react"),{description:"Progressive Image",hold:!n&&!p&&f!=null}),h.jsx(c("CometImage.react"),babelHelpers["extends"]({},a,{alt:b,height:n||f==null?void 0:e,src:n||f==null?d:f,testid:void 0,xstyle:[g,k.img]}))]})}function a(a){return h.jsx(l,babelHelpers["extends"]({},a),a.currentImgSrc)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometPhotoViewerZoom.react",["CometMediaViewerDispatcherContext","CometMediaViewerViewStateContext","CometPhotoViewerContainerContext","CometPhotoViewerZoomUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useRef;function a(a){a=a.children;var b=j(c("CometMediaViewerViewStateContext")),e=j(c("CometMediaViewerDispatcherContext")),f=j(c("CometPhotoViewerContainerContext")),g=k(null),l=i(function(){if(f!=null&&f.current!=null){var a=f.current.getBoundingClientRect();return{height:a.height,left:a.left,top:a.top,width:a.width}}return null},[f]),m=i(function(a){var b;b=(b=g.current)==null?void 0:b.getBoundingClientRect();var c=l();b&&c&&e({clientX:a.clientX,clientY:a.clientY,currentRectCoord:[b.top,b.left],currentRectSize:[b.width,b.height],height:c.height,type:"DRAG",width:c.width})},[e,l]),n=i(function(){window.removeEventListener("mouseup",n),window.removeEventListener("mousemove",m)},[m]),o=i(function(a){if(b.scale<=1)return;var c=l();if(g&&g.current&&c&&!d("CometPhotoViewerZoomUtils").isOverflown(g.current,b.scale,[c.width,c.height]))return;a.preventDefault();e({clientX:a.clientX,clientY:a.clientY,type:"DRAG_START"});window.addEventListener("mouseup",n);window.addEventListener("mousemove",m)},[e,l,m,n,b.scale]);return h.jsx("div",{onMouseDown:o,children:h.jsx("div",{className:b.prevScale!==b.scale?"heur4gxb flx89l3n tn0ko95a":"",ref:g,style:{transform:"translate("+b.translateX+"px, "+b.translateY+"px) scale("+b.scale+")"},children:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometPhotoViewerResponsiveInnerWrapper.react",["CometPhotoViewerZoom.react","CometRouteRenderType","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={backgroundContainerDialog:{"@media (max-width: 899px)":{height:"nos9j3a5"}},backgroundContainerDialogWithFooter:{height:"n626y76b","@media (max-width: 899px)":{height:"aessy0lw"}},backgroundContainerResponsive:{alignItems:"bp9cbjyn",display:"j83agx80",position:"l9j0dhe7","@media (max-width: 899px)":{height:"spskuzq3"}},backgroundContainerTabs:{height:"bkyfam09","@media (max-width: 899px)":{height:"pw8zj2ei"}},backgroundContainerTabsWithFooter:{height:"bekozo2m","@media (max-width: 899px)":{height:"f6tgzqhp"}},ie11PhotoWrapperWidth:{width:"k4urcfbm"},ie11minHeight:{minHeight:"kltspiyx"},image:{maxWidth:"d2edcug0","@media (max-width: 899px)":{maxHeight:"r9f5tntg"}},maxImageHeightDialog:{maxHeight:"ji94ytn4","@media (max-width: 899px)":{maxHeight:"bnxxjg7g"}},maxImageHeightDialogWithFooter:{maxHeight:"nskh8ow2","@media (max-width: 899px)":{maxHeight:"dx5evmzu"}},maxImageHeightTabs:{maxHeight:"gitj76qy","@media (max-width: 899px)":{maxHeight:"bnxxjg7g"}},maxImageHeightTabsWithFooter:{maxHeight:"kgqd366c","@media (max-width: 899px)":{maxHeight:"a7lra598"}},passthroughImage:{backgroundPosition:"d2hbt3d9",backgroundRepeat:"qb00l2mb",backgroundSize:"gj6al65z",height:"datstx6m",width:"k4urcfbm"},photoWrapperPlaceholder:{height:"datstx6m",width:"k4urcfbm"},photoWrapperResponsive:{alignItems:"bp9cbjyn",display:"j83agx80",flexDirection:"cbu4d94t",justifyContent:"taijpn5t",position:"l9j0dhe7"},placeholderContainer:{height:"datstx6m",width:"k4urcfbm"}};function j(a,b){a===void 0&&(a=!1);b===void 0&&(b=!1);var e=d("CometRouteRenderType").useIsPushView();return c("stylex")(i.backgroundContainerResponsive,!a&&e&&i.backgroundContainerDialog,!a&&!e&&i.backgroundContainerTabs,a&&e&&i.backgroundContainerDialogWithFooter,a&&!e&&i.backgroundContainerTabsWithFooter,b&&i.placeholderContainer)}function k(a,b){var e=d("CometRouteRenderType").useIsPushView();return c("stylex")(!a&&e&&i.maxImageHeightDialog,!a&&!e&&i.maxImageHeightTabs,a&&e&&i.maxImageHeightDialogWithFooter,a&&!e&&i.maxImageHeightTabsWithFooter,b&&i.passthroughImage,!b&&i.image,c("gkx")("1299319")&&i.ie11minHeight)}function l(a,b){var e=d("CometRouteRenderType").useIsPushView();return[!a&&e&&i.maxImageHeightDialog,!a&&!e&&i.maxImageHeightTabs,a&&e&&i.maxImageHeightDialogWithFooter,a&&!e&&i.maxImageHeightTabsWithFooter,b&&i.passthroughImage,!b&&i.image,c("gkx")("1299319")&&i.ie11minHeight]}function a(a,b){var d=a.height,e=a.imageUri,f=a.showPlaceholderImage;f=f===void 0?!0:f;var g=a.width;a=a.withFooter;a=a===void 0?!1:a;a=k(a,!0);var l=j(!1,!0);return h.jsx("div",{className:l,ref:(l=b)!=null?l:null,children:e!=null&&f&&h.jsx("div",{className:c("stylex")(i.photoWrapperResponsive,i.photoWrapperPlaceholder),children:h.jsx("div",{className:a,style:d!=null&&g!=null?{backgroundImage:"url("+e+")",maxHeight:d,maxWidth:g}:{backgroundImage:"url("+e+")"}},e)})})}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){var d=a.imageComponent,e=a.imageComponentWithXStyle;a=a.withFooter;a=a===void 0?!1:a;var f=k(a,!1);a=l(a,!1);b=h.jsx("div",{className:c("stylex")(i.photoWrapperResponsive,c("gkx")("1299319")&&i.ie11PhotoWrapperWidth),ref:b,children:d!=null?d(f):e!=null?e(a):null});return h.jsx(c("CometPhotoViewerZoom.react"),{children:b})}b.displayName=b.name+" [from "+f.id+"]";e=h.forwardRef(b);f=h.forwardRef(a);g.useCometPhotoViewerContainerStyles=j;g.CometPhotoViewerImageWrapper=e;g.CometPhotoViewerPlaceholderWrapper=f}),98);
__d("CometPhotoViewerViewStateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({highlightedKnownAITagID:null,isProductTagging:!1,knownAITags:null,tagModeEnabled:!1,unknownAITags:null});g["default"]=b}),98);
__d("CometPhotoViewerViewStateDispatcherContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(c("emptyFunction"));g["default"]=b}),98);
__d("NumAiSuggestionsBubbleImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1746400");c=b("FalcoLoggerInternal").create("num_ai_suggestions_bubble_impression",a);e.exports=c}),null);
__d("ProductTagPhotoViewerDoneClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744225");c=b("FalcoLoggerInternal").create("product_tag_photo_viewer_done_click",a);e.exports=c}),null);
__d("CometPhotoViewer.react",["fbt","Actor","CometAIProductTagSuggestionsUtil.react","CometHero.react","CometImage.react","CometMediaViewerStage.react","CometPagelet.react","CometPhotoTaggingConstants","CometPhotoViewerContainerContext","CometPhotoViewerImgRenderer.react","CometPhotoViewerResponsiveInnerWrapper.react","CometPhotoViewerViewStateContext","CometPhotoViewerViewStateDispatcherContext","CometPhotoViewer_photo.graphql","CometPlaceholder.react","CometRelay","CometRouteParams","CometRouteRenderType","CometTheme.react","CometVisualCompletionAttributes","CometWarningScreenContext","FBShopsLegacyUpgradeProductTaggingUtils","JSResourceForInteraction","NumAiSuggestionsBubbleImpressionFalcoEvent","ProductTagPhotoViewerDoneClickFalcoEvent","TetraButton.react","TetraText.react","WebSession","deferredLoadComponent","orEmptyArray","react","recoverableViolation","requireDeferred","requireDeferredForDisplay","stylex","useCometLazyDialog","useCurrentRoute","useMediaViewerVPVDLogger","useMergeRefs","useRoutePassthroughProps","useStoryViewabilityLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useMemo,o=e.useRef,p=c("requireDeferred")("CometMediaTagFalcoEvent").__setRef("CometPhotoViewer.react");e=c("requireDeferred")("CometPhotoTagLayer.react").__setRef("CometPhotoViewer.react");var q=c("requireDeferredForDisplay")("CometPhotoViewerTopRightIcons.react").__setRef("CometPhotoViewer.react"),aa=c("JSResourceForInteraction")("CometPhotoViewerProductTagEducationDialog.react").__setRef("CometPhotoViewer.react"),ba=c("deferredLoadComponent")(e),ca=c("deferredLoadComponent")(q),r={container:{display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",position:"l9j0dhe7"},noPointerEvents:{pointerEvents:"hzruof5a"},peopleTagInstructionText:{paddingBottom:"ihqw7lf3"},productTagInstructions:{alignItems:"bp9cbjyn",display:"j83agx80",flexDirection:"btwxx1t3"},tagDoneDiv:{pointerEvents:"oqq733wu"},tagInstruction:{position:"pmk7jnqg",start:"kfkz5moi",transform:"cj5g2342"},tagInstructionRow:{alignItems:"aovydwv3",backgroundImage:"kpb67iw4",bottom:"i09qtzwb",display:"j83agx80",height:"fdipuqhw",justifyContent:"taijpn5t",paddingBottom:"jfpizvyy",pointerEvents:"hzruof5a",position:"pmk7jnqg",width:"k4urcfbm"},tagInstructionText:{alignItems:"bp9cbjyn",display:"j83agx80",paddingEnd:"rv4hoivh"},tagLayer:{bottom:"i09qtzwb",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"}},da=i!==void 0?i:i=b("CometPhotoViewer_photo.graphql");function a(a){var e,f,g,i,q,s,t,u,v=l(c("CometPhotoViewerViewStateDispatcherContext")),w=l(c("CometPhotoViewerViewStateContext")),x=c("useCometLazyDialog")(aa),ea=x[0];x=o(null);var y=d("Actor").useActor(),z=y[0];y[1];y=a.origHeight;var A=a.origSrc,B=a.origWidth,C=a.photo,D=a.photoTagLayerQueryReference,E=a.showTag;E=E===void 0?!1:E;var fa=a.storyRenderLocation,ga=babelHelpers.objectWithoutPropertiesLoose(a,["origHeight","origSrc","origWidth","photo","photoTagLayerQueryReference","showTag","storyRenderLocation"]),F=d("CometRelay").useFragment(da,C);C=k(function(){v({tagData:{isProductTagging:!1,tagModeEnabled:!1},type:"UPDATE_TAG_DATA"})},[v]);var G=F==null?void 0:(e=F.image)==null?void 0:e.uri,H=F==null?void 0:F.accessibility_caption,I=F==null?void 0:F.id,J=F==null?void 0:(e=F.owner)==null?void 0:e.id;e=c("orEmptyArray")(F==null?void 0:(e=F.tags)==null?void 0:e.edges);var K=o(new Set(e.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.name}))),L=F==null?void 0:F.created_time,M=F==null?void 0:(e=F.container_story)==null?void 0:e.post_id;e=(F==null?void 0:F.can_viewer_add_tags)===!0;f=F==null?void 0:(f=F.cix_screen)==null?void 0:f.view_model;var N=n(function(){return{authorId:J,createdTime:L,fbid:I,source:6,storyContainerId:M}},[J,L,I,M]);N=c("useMediaViewerVPVDLogger")(N);var O=N[0],P=N[1];N=F==null?void 0:(N=F.container_story)==null?void 0:N.encrypted_tracking;g=F==null?void 0:(g=F.container_story)==null?void 0:g.viewability_config;i=(i=F==null?void 0:F.container_story)!=null?i:{};i=i.client_view_config;i={can_delay_log_impression:i==null?void 0:i.can_delay_log_impression,use_banzai_signal_imp:i==null?void 0:i.use_banzai_signal_imp,use_banzai_vital_imp:i==null?void 0:i.use_banzai_vital_imp};i=c("useStoryViewabilityLogger")({clientViewConfig:i,disabledViewabilityEventTypes:[5],encryptedTracking:N,position:0,viewabilityConfig:g});N=i.ref;g=c("useMergeRefs")(O,N);i=d("CometPhotoViewerResponsiveInnerWrapper.react").useCometPhotoViewerContainerStyles();var Q=d("CometWarningScreenContext").useIsOverlayShown();O=d("CometAIProductTagSuggestionsUtil.react").getUntaggedKnownTags(F,w.knownAITags);N=d("CometAIProductTagSuggestionsUtil.react").getUntaggedUnknownTags(F,w.unknownAITags);var R=O.length+N.length,S=o(function(){b("NumAiSuggestionsBubbleImpressionFalcoEvent").log(function(){var a;return{creator_id:F==null?void 0:(a=F.owner)==null?void 0:a.page_id,media_id:I,media_type:"photo",platform:"comet",referral_source:"post_viewer"}})});m(function(){R>0&&(S.current&&S.current())},[R]);O=function(){var a;v({tagData:{isProductTagging:!1,tagModeEnabled:!1},type:"UPDATE_TAG_DATA"});if(I==null){c("recoverableViolation")("photo id can not be null","comet_feed");return}a=c("orEmptyArray")(F==null?void 0:(a=F.tags)==null?void 0:a.edges);a=a.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.name});var e=d("WebSession").getId(),f=K.current.size?a.filter(function(a){return!K.current.has(a)}):a;T?b("ProductTagPhotoViewerDoneClickFalcoEvent").log(function(){return{container_post_id:M,creator_id:z,media_id:I,media_type:"photo",platform:"comet",referral_source:"post_viewer"}}):p.onReady(function(a){a.log(function(){return{media_fbid:I,num_users_tagged:f.length,session_id:e}})});K.current=new Set(a)};N=Boolean(F==null?void 0:(N=F.tags)==null?void 0:N.edges.some(function(a){return!(a==null?void 0:(a=a.tag)==null?void 0:a.is_product_tag)}));q=((F==null?void 0:(q=F.photo_product_tags)==null?void 0:q.length)||0)>0;s=Boolean(F==null?void 0:(s=F.owner)==null?void 0:s.page_shop_has_taggable_products)&&Boolean(F==null?void 0:(s=F.owner)==null?void 0:s.is_viewer_admin);t=F==null?void 0:(t=F.owner)==null?void 0:t.additional_profile_has_taggable_products;t=t!==null&&t!==void 0?Boolean(t)&&z===(F==null?void 0:(t=F.owner)==null?void 0:t.user_id):s&&Boolean((F==null?void 0:(t=F.owner)==null?void 0:t.page_id)!=null)&&z===(F==null?void 0:(t=F.owner)==null?void 0:t.page_id);q=N||!q&&!N&&!s;var T=t&&!N;t=(F==null?void 0:F.owner)&&(F==null?void 0:(s=F.owner)==null?void 0:s.page_id)!=null?d("FBShopsLegacyUpgradeProductTaggingUtils").getProductTaggingLegacyUpgradeStatus(F==null?void 0:F.owner):null;N=d("CometRouteParams").useRouteParams();s=c("useCurrentRoute")();s=(s=s==null?void 0:s.transparent)!=null?s:!1;var U=N.aymt_channel!==null&&N.aymt_channel!==void 0,V=o(!1);m(function(){U&&(V.current||ea({})),V.current=!0});N=d("CometRouteRenderType").useIsPushView();var W=d("CometWarningScreenContext").useParentRenderInstructions(),X=F==null?void 0:(u=F.image)==null?void 0:u.width,Y=F==null?void 0:(u=F.image)==null?void 0:u.height;u=c("useRoutePassthroughProps")();u=(u==null?void 0:u.glbFileURIHackToRenderAs3D_DO_NOT_USE)!=null?String(u==null?void 0:u.glbFileURIHackToRenderAs3D_DO_NOT_USE):null;var ha=n(function(){var a;return F==null||G==null||X==null||Y==null?null:j.jsx(c("CometImage.react"),{alt:(a=H)!=null?a:void 0,height:Y,src:G,width:X},G)},[F,G,X,Y,H]);if(G==null){c("recoverableViolation")("Error loading media. More investigation is needed, might be an invalid photo, a special type of MediaSet, or something else.","comet_ui");return h._("No valid photo to display.")}var Z=W==="CLIP_TO_MEDIA",$=f!=null?j.jsx(d("CometRelay").MatchContainer,{match:f,props:{alwaysShowDetails:!0,data:f,isFullScreenMediaPlayerStyle:!0,mediaUri:G,surface:"photo_viewer"}}):null,ia=(W=y)!=null?W:Y,ja=E&&D!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE,{className:c("stylex")(r.tagLayer,!w.tagModeEnabled&&r.noPointerEvents),children:j.jsx(ba,{isTaggingProducts:w.isProductTagging,photoTagLayerQueryReference:D,tagBoxSize:d("CometPhotoTaggingConstants").TAGGING_BOX_SIZE,tagModeEnabled:w.tagModeEnabled})}))}):null,ka=c("CometVisualCompletionAttributes").MEDIA_VC_IMAGE;f=j.jsx(d("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponentWithXStyle:function(a){var b;return j.jsxs(j.Fragment,{children:[P,j.jsx(c("CometHero.react"),{description:"MainPhoto"}),j.jsx(c("CometPhotoViewerImgRenderer.react"),babelHelpers["extends"]({},ka,{alt:(b=H)!=null?b:void 0,currentImgSrc:G,height:(b=ia)!=null?b:void 0,origSrc:A,xstyle:a})),Z&&$,ja]})}});W=j.jsx(d("CometPagelet.react").Placeholder,{className:i,fallback:A!=null?j.jsx(d("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{height:y,imageUri:A,ref:g,showPlaceholderImage:A!=null&&B!=null&&y!=null&&!Q,width:B}):j.jsx("div",{className:i,ref:g,children:j.jsx(d("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponentWithXStyle:function(a){var b;return j.jsxs(j.Fragment,{children:[P,!Q&&j.jsx(c("CometImage.react"),{alt:(b=H)!=null?b:void 0,src:G,testid:void 0,xstyle:a},G)]})}})}),name:"MediaViewerPhoto",pageletType:"media",ref:g,children:j.jsx(d("CometRelay").MatchContainer,{fallback:f,match:F==null?void 0:F.comet_photo_renderer,props:{fallback:ha,glbFileURI:u}})},G);y=w.isProductTagging?c("stylex")(r.productTagInstructions):c("stylex")(r.tagInstruction);B=w.isProductTagging?h._("Click on the photo to start tagging products"):h._("Click on the photo to start tagging");i=E&&D!=null&&e===!0&&(F==null?void 0:F.comet_photo_renderer)==null;return j.jsx("div",{className:c("stylex")(r.container),"data-testid":void 0,ref:x,children:j.jsxs(c("CometPhotoViewerContainerContext").Provider,{value:x,children:[j.jsx(c("CometMediaViewerStage.react"),babelHelpers["extends"]({backgroundColor:s&&N?"dark":"default",initialTracePolicy:a.initialTracePolicy,onNavigatePhoto:C,storyRenderLocation:fa,subOrigin:a.subOrigin},ga,{children:W})),Q?null:j.jsx(ca,{authorId:J,canTag:i,fromAYMTRetroTagNotification:U,numNewAISuggestions:R,photoID:I,shouldShowPeopleTagButton:q,shouldShowProductTagButton:T,storyContainerId:M,upgradeShopModalInfo:t}),i&&w.tagModeEnabled?j.jsx(c("CometTheme.react"),{theme:"dark",xstyle:r.tagInstructionRow,children:j.jsxs("div",{className:y,children:[j.jsx("div",{className:c("stylex")(r.tagInstructionText),children:j.jsx("div",{className:T!==!0?c("stylex")(r.peopleTagInstructionText):null,children:j.jsx(c("TetraText.react"),{color:"primary",numberOfLines:1,type:"headline4",children:B})})}),j.jsx("div",{className:c("stylex")(r.tagDoneDiv),children:j.jsx(c("TetraButton.react"),{label:h._("Finished tagging"),onPress:O,testid:void 0,type:"primary"})})]})}):null,!Z&&$]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PagesPermalinkImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744169");c=b("FalcoLoggerInternal").create("pages_permalink_impression",a);e.exports=c}),null);
__d("CometSinglePostRoot.react",["Actor","CometContentArea.react","CometErrorRoot.react","CometFeedHighlightedStoriesContext","CometFeedStoryGlimmer.react","CometFeedUnit.react","CometFeedWidthStyles","CometInteractionSourceContext","CometPlaceholder.react","CometRelay","CometRouteParams","CometSSRMultipassBoundary.react","CometSinglePostRootQuery.graphql","CometStoryRenderLocationContext.react","PagesLogger","PagesLoggerEventEnum","PagesPermalinkImpressionFalcoEvent","RelayUFI2CommentsKeyContext","VideoAutoplayLocalScopeProvider.react","VideoPlayerAutoplayRulesProvider","cr:1832048","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useMemo,l=e.useState,m={feedUnitContainer:{marginBottom:"nzypyw8j",marginEnd:"nhadk0th",marginStart:"t7yuvbsa",marginTop:"tr9rh885",minWidth:"glvd648r",width:"oh7imozk"},wrapper:{alignItems:"ll8tlv6m",display:"j83agx80",justifyContent:"taijpn5t",width:"k4urcfbm"}},n=d("CometFeedWidthStyles").getFeedWidthStyles(),o=0,p=h!==void 0?h:h=b("CometSinglePostRootQuery.graphql");function q(){return i.jsx(c("CometContentArea.react"),{children:i.jsx("div",{className:c("stylex")(m.wrapper),children:i.jsx("div",{className:c("stylex")(m.feedUnitContainer),children:i.jsx(c("CometFeedStoryGlimmer.react"),{})})})})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.singlePostRootQueryReference,e=a.storyID;a=d("CometRelay").usePreloadedQuery(p,b);b=b.variables;a=a.node;var f=k(function(){return new Set([e])},[e]),g=l(null),h=g[0];g=g[1];return a==null||h!=null?i.jsx(c("CometErrorRoot.react"),{routeProps:{fourZerofour:!0}}):i.jsx(c("CometContentArea.react"),{children:i.jsx(c("CometInteractionSourceContext").Provider,{value:8,children:i.jsx(c("RelayUFI2CommentsKeyContext").Provider,{value:b.UFI2CommentsProvider_commentsKey,children:i.jsx(c("CometStoryRenderLocationContext.react").Provider,{value:b.renderLocation,children:i.jsx(c("CometFeedHighlightedStoriesContext").Provider,{value:f,children:i.jsx("div",{className:c("stylex")(m.wrapper),children:i.jsx("div",{className:c("stylex")(m.feedUnitContainer,n.feedContainer),children:i.jsx(c("CometFeedUnit.react"),{feedUnit:a,onError:g,position:o,variables:b})})})})})})})})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var e=d("CometRouteParams").useRouteParams(),f=d("Actor").useActor(),g=f[0];f=String(e==null?void 0:e.story_token);var h=a.props.routeProps.pageID;j(function(){var a=g===h;h!=null&&a&&(d("PagesLogger").log(h,c("PagesLoggerEventEnum").IMPRESSION,"admin_permalink_view",null,["core_biz_growth"]),c("PagesPermalinkImpressionFalcoEvent").log(function(){return{event_data:{},event_location:"notification",page_id:h}}))},[h,g]);e=d("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("default_feed");return i.jsxs(c("CometPlaceholder.react"),{fallback:i.jsx(q,{}),children:[i.jsx(c("CometSSRMultipassBoundary.react"),{fallback:i.jsx(q,{}),id:"feed",children:i.jsx(c("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:e,children:i.jsx(r,{singlePostRootQueryReference:a.queries.singlePostRootQueryReference,storyID:f})})}),b("cr:1832048")&&a.queries.loggedOutCTAfooterDataQueryReference&&i.jsx(b("cr:1832048"),{footerDataQueryReference:a.queries.loggedOutCTAfooterDataQueryReference})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);